# OCaml-WiringPi2
This is a thin binding to [WiringPi](https://github.com/WiringPi/WiringPi) making use of OCamls
excellent `ctypes` and `dune`s new features to more easily bind to C-libs with autogenerated build-rules.
The thin bindings are added as needed, which has the advantage that they have been tested in practice.
Make a PR if you want to bind to more of the WiringPi interface.

## Installing
* grab the WiringPi code and follow their instructions for compilation
* grab this repository and have it as a library subfolder (e.g. symlink) within your `dune` project

## Related

### OCaml library `wiringpi`
https://github.com/Leonidas-from-XIV/ocaml-wiringpi

This library is deprecated and uses an old and unsafe method of binding to C-libraries, where
C-stubs are written manually.
It also doesn't bind to the whole WiringPi interface, or anything related to SPI or I2C.

### OCaml library `gpiod`
https://github.com/jawline/ocamlGpiod

This is a thin binding to the new Linux library for interfacing with GPIO in a safer way than
the old sysfs Linux interface.
Problems:
* [`libgpiod`](https://web.git.kernel.org/pub/scm/libs/libgpiod/libgpiod.git/about/) is buggy on the
  newest debian (as of 2025.03.05) - specifically bulk listening on pins doesn't work correctly.
* The OCaml binding doesn't use the right types, and is not complete, so you need to extend the
  binding with `ctypes` within your own program.
* `libgpiod` doesn't try to handle anything related to Linux SPI/I2C devices. Maybe the intention
  is that you write your own C-code making use of `ioctl` to communicate with the devices.
  In contrast, WiringPi supports these devices where it wraps calls to `ioctl`.





